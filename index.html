
<!DOCTYPE html>
<html lang="ja">
  <head>
    <!-- include head -->
    

<meta charset="utf-8">
<title>ハタさんのブログ(出張版)</title>
<meta name="author" content="Yusuke Hata">
<meta name="description"
      content="My First Perl#5 Apr 22nd, 2012 さて、期間があいてしまいました。
クラス系をやっていたけど、少し脱線して、関数プログラミング的なものを少しやってました。
理解を深めるために、今回もjavascriptのコードを含めます。 高階関数 perlでも高階関数( &hellip;">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="canonical" href="http://nowelium.github.com/index.html">
<link href="/favicon.png" rel="icon">
<link href="/stylesheets/screen.css"
      media="screen, projection"
      rel="stylesheet"
      type="text/css">
<link href="/atom.xml"
      rel="alternate"
      title="ハタさんのブログ(出張版)"
      type="application/atom+xml">

<style type="text/css">
  header[role="banner"] hgroup h1 {
    /* font-size: 180% */
    color: #999;
  }
</style>


<script src="/javascripts/modernizr-2.0.js" type="text/javascript"></script>
<script src="/javascripts/ender.js" type="text/javascript"></script>
<script src="/javascripts/octopress.js" type="text/javascript"></script>



    <!-- /include -->
  </head>
  <body>
    <div id="wrapper">

      <header role="banner" class="site_metas">
	<!-- include header -->
	
<hgroup>
  <h1><a href="/">ハタさんのブログ(出張版)</a></h1>
  
</hgroup>

	<!-- /include -->
        <!-- include social_service_links -->
	
<div id="social-links">
  <ul>
    
    <li id="social-links-github">
      <a title="GitHub" href="https://github.com/nowelium">GitHub</a>
    </li>
    
    
    <li id="social-links-twitter">
      <a title="twitter" href="http://twitter.com/nowelium">twitter</a>
    </li>
    
    <li id="social-links-feed">
      <a title="feed" href="http://nowelium.github.com/atom.xml">feed</a>
    </li>
  </ul>
</div>

        <!-- /include -->
      </header>

      <div id="content">
	<!-- content -->
	<div id="page">
  <div id="top">

  
  
  
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">My First Perl#5</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-22T22:09:00+09:00" pubdate data-updated="true">Apr 22<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>さて、期間があいてしまいました。<br/>
クラス系をやっていたけど、少し脱線して、関数プログラミング的なものを少しやってました。<br/>
理解を深めるために、今回もjavascriptのコードを含めます。</p>

<h2>高階関数</h2>

<p>perlでも高階関数(関数を引数に受け取れる関数)を扱えるらしい。<br/>
記述としてはこんな感じ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">hoge</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$foo</span><span class="p">,</span> <span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="o">&amp;</span><span class="nv">$foo</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="n">hoge</span><span class="p">(</span><span class="k">sub </span><span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$x</span> <span class="o">+</span> <span class="nv">$y</span><span class="p">;</span>
</span><span class='line'><span class="p">},</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>これは javascript に置き換えるとこんな感じになる</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">){</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
</span><span class='line'><span class="p">},</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>幾分(というか、かなり)の部分で javascript の方が可読性が高いけど、<br/>
関数hogeは、第一引数に高階関数と引数a, b受け取る関数になる、<br/>
高階関数の実装は、与えられた引数x, yを加算するだけ、というシンプルなもの</p>

<p>perl のコードだと、&amp;$foo となっているけど、$foo に入っているコードや文字列の実行に当たるらしい。<br/>
これに関しては以下になる</p>

<h3>変数に与えられた関数の実行</h3>

<p>変数に割り当てられた変数の実行は、こんな感じでできるらしい(ただし、&#8221;strict refs&#8221;になる)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">sub </span><span class="nf">hoge</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$arg1</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">print</span> <span class="s">&quot;arg1 =&gt; $arg1 \n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$variable</span> <span class="o">=</span> <span class="s">&quot;hoge&quot;</span><span class="p">;</span>
</span><span class='line'><span class="o">&amp;</span><span class="p">{</span><span class="nv">$variable</span><span class="p">}(</span><span class="s">&quot;hello world&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>これにより、変数$variableに割り当てられた値の実行は &amp;$variable で行うらしい</p>

<h2>カリー化</h2>

<p>高階関数ができるなら、やっぱり使えて欲しいカリー化(currying)<br/>
カレーじゃない方で</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">currying</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$target</span><span class="p">,</span> <span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="k">sub </span><span class="p">{</span>
</span><span class='line'>    <span class="k">my</span> <span class="nv">$arg3</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="o">&amp;</span><span class="nv">$target</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">,</span> <span class="nv">$arg3</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$calc</span> <span class="o">=</span> <span class="k">sub </span><span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nv">$c</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="p">(</span><span class="nv">$a</span> <span class="o">+</span> <span class="nv">$b</span><span class="p">)</span> <span class="o">*</span> <span class="nv">$c</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$c1</span> <span class="o">=</span> <span class="n">currying</span><span class="p">(</span><span class="nv">$calc</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c1</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1"># ==&gt; 9</span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c1</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="c1"># ==&gt; 12</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$c2</span> <span class="o">=</span> <span class="n">currying</span><span class="p">(</span><span class="nv">$calc</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c2</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1"># ==&gt; 21</span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c2</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="c1"># ==&gt; 28</span>
</span></code></pre></td></tr></table></div></figure>


<p>関数を返却されたことがわかっていれば、&amp;$variable() で関数を実行できるらしい<br/>
これにより、引数束縛(curry)ができると。<br/>
少し、&amp;$var が気持ち悪いけど。</p>

<p>これまた、js で書きなおすとこんな感じ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">currying</span>  <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">){</span>
</span><span class='line'>  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arg3</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">target</span><span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">,</span> <span class="nx">arg3</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">calc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">)</span> <span class="o">*</span> <span class="nx">c</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="nx">currying</span><span class="p">(</span><span class="nx">calc</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c1</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="c1">// ==&gt; 9</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c1</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span> <span class="c1">// ==&gt; 12</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">c2</span> <span class="o">=</span> <span class="nx">currying</span><span class="p">(</span><span class="nx">calc</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c2</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="c1">// ==&gt; 21</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c2</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span> <span class="c1">// ==&gt; 28</span>
</span></code></pre></td></tr></table></div></figure>


<h2>クロージャの生成</h2>

<p>少し戻り、クロージャの生成とその実行<br/>
高階関数ができるなら、やっぱり使えて欲しいクロージャ<br/>
やってみた。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">closure</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="k">sub </span><span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$counter</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$c1</span> <span class="o">=</span> <span class="n">closure</span><span class="p">();</span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c1</span><span class="p">();</span> <span class="c1"># ==&gt; 0</span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c1</span><span class="p">();</span> <span class="c1"># ==&gt; 1</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$c2</span> <span class="o">=</span> <span class="n">closure</span><span class="p">();</span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c2</span><span class="p">();</span> <span class="c1"># ==&gt; 0</span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c2</span><span class="p">();</span> <span class="c1"># ==&gt; 1</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># c1 </span>
</span><span class='line'><span class="k">print</span> <span class="o">&amp;</span><span class="nv">$c1</span><span class="p">();</span> <span class="c1"># ==&gt; 2</span>
</span></code></pre></td></tr></table></div></figure>


<p>かなり素直に実行できます。</p>

<h1>今回はここまで</h1>

<p>次回は、リファクタリングで使える ::can とか使って<br/>
パッケージ単位で関数プログラミングです。</p>

<p>人はそれをメタプログラミングというらしいけど、関数言語だと結構頻繁に使えて便利なので<br/>
次回はそこにハマった人の内容になる。かも。</p>
</div>
  
  <footer style="text-align: right">
    <a rel="full-article" href="/blog/2012/04/22/my-first-perl-5.html">permalink</a>
  </footer>


    </article>
  
  
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">My First Perl #4</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-01T21:15:00+09:00" pubdate data-updated="true">Apr 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>クラス編</h1>

<p>ということで、クラス。<br/>
Classで重要なのはやっぱり継承パターンと多態性でしょう。<br/>
アクセサはどうなってるのか、パッケージとかも含め、それくらいできると夢が広がりングな気がする</p>

<p>参考にはいつもの <a href="http://d.hatena.ne.jp/perlcodesample/20100513/1276960096">オブジェクト指向 / Perl逆引き事典 - サンプルコードによるPerl入門</a> を 見てます。</p>

<h2>クラス作成</h2>

<p>package が使えるそうな。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">package</span> <span class="n">Hoge</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">new</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$proto</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">bless</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$proto</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$hoge</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$hoge</span><span class="p">;</span>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$hoge</span> <span class="o">=</span> <span class="n">Hoge</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;hello world&#39;</span><span class="p">);</span>
</span><span class='line'><span class="k">print</span> <span class="nv">$hoge</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>コンストラクタの定義から、プロパティの設定と取得はこうやるのね。<br/>
元のページ → <a href="http://d.hatena.ne.jp/perlcodesample/20090320/1237130107">汎用的なコンストラクタの雛形 - サンプルコードによるPerl入門</a> には init メソッドが必要とのことだったけど、今回は無視<br/>
どうやら、new のコンストラクタには <code>[Class(prototype), arg1, arg2..]</code> といった形式で渡されているようですね<br/>
bless がよくわからないけど、js でいうところの Function.prototype.bind 的なものだろうか、第一引数に prototype を割り当てる的な(それだとapplyの方が近そうだけど)</p>

<h2>プロパティ作成</h2>

<p>もう少し、プロパティ<br/>
参考元を参考に、引数を色々受け取ってみる</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">package</span> <span class="n">Hoge</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">new</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$proto</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">bless</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$proto</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">init</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$self</span><span class="p">,</span> <span class="p">(</span><span class="nv">$hoge</span><span class="p">,</span> <span class="nv">$foo</span><span class="p">,</span> <span class="nv">$bar</span><span class="p">))</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$hoge</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$foo</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$bar</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$hoge</span> <span class="o">=</span> <span class="n">Hoge</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;world&#39;</span><span class="p">,</span> <span class="s">&#39;perl #4&#39;</span><span class="p">);</span>
</span><span class='line'><span class="c1"># print $hoge-&gt;hoge . &#39;:&#39; . $hoge-&gt;foo . &#39;:&#39; . $hoge-&gt;bar . &quot;\n&quot;;</span>
</span><span class='line'><span class="c1">## =&gt; Can&#39;t locate object method &quot;hoge&quot; via package &quot;Hoge&quot;</span>
</span><span class='line'><span class="k">print</span> <span class="nv">$hoge</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$hoge</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$hoge</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>なるほど、<code>$self-&gt;{verialble}</code> で設定したものは、<code>$self-&gt;variable</code>で取り出せないのね(Hashだから?)。当たり前といえば当たり前だった。<br/>
それ以外は意外とフツーな感じ</p>

<h2>メソッド作成</h2>

<p>プロパティまでは作成できたので、次はメソッド。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">package</span> <span class="n">Hoge</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">new</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$proto</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">bless</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$proto</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">init</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$self</span><span class="p">,</span> <span class="p">(</span><span class="nv">$hoge</span><span class="p">,</span> <span class="nv">$foo</span><span class="p">,</span> <span class="nv">$bar</span><span class="p">))</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$hoge</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$foo</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$bar</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">greeting</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$hoge</span> <span class="o">=</span> <span class="n">Hoge</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;world&#39;</span><span class="p">,</span> <span class="s">&#39;perl #4&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$hoge</span><span class="o">-&gt;</span><span class="n">greeting</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>先ほどの property で出力してたのを メソッドで。<br/>
第一引数に <code>self(自分自身)</code> が入ってるとか、python ぽい</p>

<h3>メソッド引数</h3>

<p>メソッドのプロパティはどうなってるのか。<br/>
たぶん、<code>#init</code> で試したから同じだと思うけど。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">package</span> <span class="n">Hoge</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">new</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$proto</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">bless</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$proto</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">init</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$self</span><span class="p">,</span> <span class="p">(</span><span class="nv">$hoge</span><span class="p">,</span> <span class="nv">$foo</span><span class="p">,</span> <span class="nv">$bar</span><span class="p">))</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$hoge</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$foo</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$bar</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">greeting</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">,</span> <span class="nv">$arg3</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$arg1</span> <span class="o">.</span> <span class="s">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$arg2</span> <span class="o">.</span> <span class="s">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$arg3</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$hoge</span> <span class="o">=</span> <span class="n">Hoge</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;world&#39;</span><span class="p">,</span> <span class="s">&#39;perl #4&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$hoge</span><span class="o">-&gt;</span><span class="n">greeting</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ふむ。<br/>
shift は <code>@_</code> から一つ shift して、 <code>@_</code> 自体は <code>(a, b) = @_</code> とかのリスト構文的なので、値をまとめて代入できる。と</p>

<h2>継承</h2>

<p>クラスの継承。なんかちょっと特殊だった</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">package</span> <span class="n">Hoge</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">new</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$proto</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">bless</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$proto</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">init</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$self</span><span class="p">,</span> <span class="p">(</span><span class="nv">$hoge</span><span class="p">,</span> <span class="nv">$foo</span><span class="p">,</span> <span class="nv">$bar</span><span class="p">))</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$hoge</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$foo</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$bar</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">greeting</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">,</span> <span class="nv">$arg3</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$arg1</span> <span class="o">.</span> <span class="s">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$arg2</span> <span class="o">.</span> <span class="s">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$arg3</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">package</span> <span class="n">Foo</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">base</span><span class="p">(</span><span class="s">&#39;Hoge&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">new</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$proto</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">bless</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$proto</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">greeting</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">print</span> <span class="s">&#39;Im Foo#&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;world&#39;</span><span class="p">,</span> <span class="s">&#39;perl #4&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$foo</span><span class="o">-&gt;</span><span class="n">greeting</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>まず、</p>

<ul>
<li><code>@ISA</code> はよくわからなかったので、<code>use base</code>による継承を使った。</li>
<li><code>super</code> を指定しないでも上位メソッドはコンストラクタから呼べた</li>
<li><code>new</code> のコンストラクタには、上位クラスの参照はなかった</li>
<li>override 記述をしなくても、自動的に override だった。</li>
<li>上位プロパティは特に指定なしに呼び出せた。</li>
</ul>


<p>これ、use で複数とか指定するとどうなっちゃうんだろ。差分継承だったらいいな。(それはいつかやる)</p>

<h3>overrideしたメソッドから上位メソッドの呼び出し</h3>

<p>疑問に思ったのでこれをやってみる<br/>
この方法は、<a href="http://d.hatena.ne.jp/BigFatCat/20071215/1197701541">ここから</a> 参照。<br/>
ちなみに、やらんとしてることは、javascript だとこんな感じ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">Hoge</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="nx">Hoge</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">greeting</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Im Hoge: &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">Foo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">Hoge</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="nx">Foo</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">greeting</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bar</span><span class="p">){</span>
</span><span class='line'>  <span class="nx">Hoge</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">greeting</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;bar value =&gt; &#39;</span> <span class="o">+</span> <span class="nx">bar</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nx">foo</span><span class="p">.</span><span class="nx">greeting</span><span class="p">(</span><span class="s1">&#39;**bar value**&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ということで、perl</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">package</span> <span class="n">Hoge</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">new</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$proto</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">bless</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$proto</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">init</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$self</span><span class="p">,</span> <span class="p">(</span><span class="nv">$hoge</span><span class="p">,</span> <span class="nv">$foo</span><span class="p">,</span> <span class="nv">$bar</span><span class="p">))</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$hoge</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$foo</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">=</span> <span class="nv">$bar</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">greeting</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">,</span> <span class="nv">$arg3</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">hoge</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span> <span class="o">.</span> <span class="s">&#39;:&#39;</span> <span class="o">.</span> <span class="nv">$self</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">bar</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$arg1</span> <span class="o">.</span> <span class="s">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$arg2</span> <span class="o">.</span> <span class="s">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$arg3</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">package</span> <span class="n">Foo</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">base</span><span class="p">(</span><span class="s">&#39;Hoge&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">new</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$proto</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">bless</span> <span class="nv">$self</span><span class="p">,</span> <span class="nv">$proto</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">greeting</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$self</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$self</span><span class="o">-&gt;</span><span class="nn">SUPER::</span><span class="n">greeting</span><span class="p">(</span><span class="s">&#39;Im&#39;</span><span class="p">,</span> <span class="s">&#39;Foo&#39;</span><span class="p">,</span> <span class="s">&#39;#greeting&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">$foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;world&#39;</span><span class="p">,</span> <span class="s">&#39;perl #4&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$foo</span><span class="o">-&gt;</span><span class="n">greeting</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>なるほど。<code>$self-&gt;SUPER::#method</code> で上位メソッド(というか親インスタンスのメソッドの呼び出し)ができるようになるのね。<br/>
これは使い道が広がるわ。</p>

<h1>次回</h1>

<p>アクセサを見てみたいところだけど、やっぱここで触れなかった package あたり。
どうやって分割してんのかと。</p>
</div>
  
  <footer style="text-align: right">
    <a rel="full-article" href="/blog/2012/04/01/my-first-perl-4.html">permalink</a>
  </footer>


    </article>
  
  
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">My First Perl #3</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-30T19:43:00+09:00" pubdate data-updated="true">Mar 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ということ(?)で、関数とクラスあたりのステップに行こうと思う</p>

<h1>関数</h1>

<p>関数は sub を使う。と<br/>
しかも sub が sub たる理由はサブルーチン。なるほど。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">hoge</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$arg1</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$arg1</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">hoge</span><span class="p">(</span><span class="s">&#39;hello world&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>shift に引数はないけど、引数を先頭から取得するときに使うらしい。<br/>
少し謎。<br/>
<strong><em>どうやら <code>shift</code> の引数なしは <code>shift @_</code> と同義らしい <a href="http://d.hatena.ne.jp/perlcodesample/20101130/1298764341">http://d.hatena.ne.jp/perlcodesample/20101130/1298764341</a></em></strong></p>

<p>もう少し引数を受け取りましょう。<br/>
構造体Hashとか</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">#my %hoge = (a =&gt; 1, b =&gt; 2);</span>
</span><span class='line'><span class="c1"># HashをHashとして出力するときは %hash なのね。。</span>
</span><span class='line'><span class="c1">#print %hoge . &quot;\n&quot;;</span>
</span><span class='line'><span class="c1"># でもkeyの値を出すときは $hash なのね。。</span>
</span><span class='line'><span class="c1">#print $hoge{a} . &quot;\n&quot;;</span>
</span><span class='line'>
</span><span class='line'><span class="k">sub </span><span class="nf">foo</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$value_1</span> <span class="o">=</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$value_1</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="c1"># ==&gt; a と出る</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$value_2</span> <span class="o">=</span> <span class="nb">ref</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$value_2</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="c1"># ==&gt; 何もでない</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">my</span> <span class="nv">$value_3</span> <span class="o">=</span> <span class="nb">ref</span> <span class="p">{</span><span class="nv">@_</span><span class="p">};</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$value_3</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="c1"># ==&gt; Hash と出る...ということはこれでHashを受け取れたハズ。</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#print $value_3{a} . &quot;\n&quot;;</span>
</span><span class='line'>  <span class="c1"># ==&gt; &#39;Global symbol &quot;%value_3&quot; requires explicit package&#39; えええええ！</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#my %value_4 = ref {@_};</span>
</span><span class='line'>  <span class="c1">#print $value_4{a} . &quot;\n&quot;;</span>
</span><span class='line'>  <span class="c1"># ==&gt; &#39;Odd number of elements in hash assignment&#39; えええええええええ！！</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># 素直に。。</span>
</span><span class='line'>  <span class="k">my</span> <span class="nv">%value_5</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$value_5</span><span class="p">{</span><span class="n">a</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$value_5</span><span class="p">{</span><span class="n">b</span><span class="p">}</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">foo</span><span class="p">((</span><span class="n">a</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>最初に <a href="http://d.hatena.ne.jp/perlcodesample/20101130/1298764341">http://d.hatena.ne.jp/perlcodesample/20101130/1298764341</a> を読んだのがマズかったか。。。<br/>
やっぱりサンプルコードがあるほうがいいよね。<br/>
というっことで、 $value_(1..4) あでは、上記の記事をナナメ読みして頑張った結果。<br/>
$value_5 というフツーな方法で大丈夫だと知ったのは <a href="http://d.hatena.ne.jp/perlcodesample/20080605/1212675666">http://d.hatena.ne.jp/perlcodesample/20080605/1212675666</a> の記事を読んでから。。</p>

<p><strong><em>正直 $value_3{a} と $value_4{a} がエラーになる理由が全然少しもわからん</em></strong><br/>
構文から学ぶべきだった。。。</p>

<p>perl って、%だったり $とか @とか タイヘンです。。</p>

<p>今回は sub 、もといサブルーチンに衝撃を受けたので、次回にでもクラスをやろう。。</p>
</div>
  
  <footer style="text-align: right">
    <a rel="full-article" href="/blog/2012/03/30/my-first-perl-3.html">permalink</a>
  </footer>


    </article>
  
  
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">Node.jsでコンソールにBad Apple!!を出力してみた</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-29T23:56:00+09:00" pubdate data-updated="true">Mar 29<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.nicovideo.jp/watch/sm8628149">【東方】Bad Apple!!　ＰＶ【影絵】</a> というニコニコ動画で人気の動画があるんだけど、これをコンソールに出してみよう。と思ってやってみた。</p>

<iframe width="312" height="176" src="http://ext.nicovideo.jp/thumb/sm17397285" scrolling="no" style="border:solid 1px #CCC;" frameborder="0"><a href="http://www.nicovideo.jp/watch/sm17397285">【ニコニコ動画】コンソールでBad Apple!! 影絵PV</a></iframe>


<p>元の動画はモノクロな感じなので、コンソールに出力するのは簡単かなーと思っていたんだけど<br/>
案外面倒だった。</p>

<p>まず、元の動画をBitmapイメージシーケンスに変換するのが面倒だった。
<a href="http://www.squared5.com/">MPEG Streamclip</a> っていうソフトに行き着くまでが大変だった。。。<br/>
こんな感じで白黒なBitmapの連続データに変換してます。</p>

<p><img src="http://nowelium.github.com/images/s2012-03-30.02.07.png" width="400" height="300"></p>

<p>んで、ここから連続したBitmap画像データができたので</p>

<p><img src="http://nowelium.github.com/images/s2012-03-30.19.35.png" width="400" height="300"></p>

<p>このBitmapたちをjavascriptで読めるように <a href="https://github.com/nowelium/node-bitmap">nowelium/node-bitmap</a> を作った。</p>

<p>Bitmapの読み取りは <a href="http://www.kk.iij4u.or.jp/~kondo/bmp/">bmp ファイルフォーマット</a> と <a href="http://ja.wikipedia.org/wiki/Windows_bitmap">Windows bitmap - Wikipedia</a> を参考にしてます。<br/>
Bitmapって画像データだけの塊だと思ってたら、ちゃんとした仕様があったんだね。。</p>

<p>今回の動画で使ってる実際のコードはgistに貼ってます。</p>

<div><script src='https://gist.github.com/2221106.js?file='></script>
<noscript><pre><code>var fs = require('fs');
var util = require('util');
var async = require('async');

var Bitmap = require('./bitmap');

//
// ニコニコ動画の【東方】Bad Apple!!　ＰＶ【影絵】 &lt;http://www.nicovideo.jp/watch/sm8628149&gt;
// を 30fps な bitmap に分割したので、
// それを読み込みつつ、コンソールに表示してみる。
//
// async &lt;https://github.com/caolan/async&gt;
// を使ってるので、 npm install async する
//
// youtubeにモッサリ動画を上げてみた。&lt;http://youtu.be/IALA76KSc4I&gt;
// 音付きにしてニコニコ動画に上げてみた。&lt;http://www.nicovideo.jp/watch/sm17397285&gt;
//
var imageSequenceDir = 'badapple_30fps_160_120';
fs.readdir(__dirname + '/' + imageSequenceDir, function(err, files){
  if(err){
    throw err;
  }

  var pathes = files.map(function(file){
    return __dirname + '/' + imageSequenceDir + '/' + file;
  }).filter(function(path){
    if(/\.bmp$/.test(path)){
      return true;
    }
    return false;
  });

  // コンソールに出すときに半角スペースと#の文字列に変換
  Bitmap.prototype.mapRGBA = function(r, g, b){
    if(255 == r &amp;&amp; 255 == g &amp;&amp; 255 == b){
      return '  ';
    }
    return '##';
  };

  var render = async.queue(function(view, next){
    util.print('\033[2J');
    util.print(view);
    util.print('\033[0;0H');
    return next(null);
  }, 1);

  var queue = async.queue(function(path, next){
    return fs.readFile(path, next);
  }, 8);

  var serial = [];
  queue.push(pathes, function(err, buffer){
    if(err){
      throw err;
    }

    var bitmap = new Bitmap(buffer);
    bitmap.init();
    if(!bitmap.isBitmap()){
      throw new Error('not bitmap');
    }

    serial.push(function(next){
      var values = bitmap.getData();

      var view = values.map(function(line){
        return line.join('');
      });
      return render.push(view.join('\n'), function(){
        return setTimeout(next, 22);
      });
    });  
  });
  queue.drain = function(){
    async.series(serial, function(err, results){
      if(err){
        console.error(err);
        return process.exit(1);
      }

      console.log('\033[2J'); // clear screen
      return process.exit(0);
    });
  };
});</code></pre></noscript></div>


<p>話は戻るけど、本家の <a href="http://www.nicovideo.jp/watch/sm8628149">【東方】Bad Apple!!　ＰＶ【影絵】</a> の派生動画が色々面白くて</p>

<p>僕が今回これをつくろうと思うきっかけになった、<a href="http://www.nicovideo.jp/watch/sm11328052">Japanino(arduino互換機)でBad Appleしてたり</a>、 <a href="http://www.nicovideo.jp/watch/sm13130024">USBモニタに出してたり</a>、 <a href="http://www.nicovideo.jp/watch/sm17154423">minecraftでやってたり</a>とまぁ色々挑戦するのが面白い動画になってます。</p>

<p>そして、僕がBitmapと格闘している間、世の中はPNGでWebsocketsまでやっていたのだった。。。<br/>
<a href="http://d.hatena.ne.jp/scalar/20120320/1332217029">WebSocket で PNG 画像をバイナリ転送して、JavaScript で展開して表示してみた</a><br/>
僕の実装の方はコンソールで動画が見れるよ！っていう誰得なものだから実用性が欲しい。。
ここまで実装できたし、次はsocket.ioにでも乗っけてみると面白そうだ。</p>
</div>
  
  <footer style="text-align: right">
    <a rel="full-article" href="/blog/2012/03/29/console-badapple-js.html">permalink</a>
  </footer>


    </article>
  
  
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">My First Perl #2</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-27T15:00:00+09:00" pubdate data-updated="true">Mar 27<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>前回の続き</h2>

<p>for 文がダサいとか言いながら、配列の初期化にこんなのを使ってた。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">my</span> <span class="nv">@list</span> <span class="o">=</span> <span class="p">();</span>
</span><span class='line'><span class="k">for</span><span class="p">(</span><span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="o">++</span><span class="nv">$i</span><span class="p">){</span>
</span><span class='line'>  <span class="nb">push</span> <span class="nv">@list</span><span class="p">,</span> <span class="nv">$i</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>これは、perl の範囲演算子で何とかなった。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">@list</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="mi">100</span><span class="p">);</span>
</span><span class='line'><span class="k">print</span> <span class="nv">$_</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span> <span class="k">for</span> <span class="nv">@list</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ということで、fizzbuzz 書き直し</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">@list</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="mi">100</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">@fizzbuzz</span> <span class="o">=</span> <span class="nb">map</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">3</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">5</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;FizzBuzz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">elsif</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">3</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;Fizz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">elsif</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">5</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;Buzz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$_</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span> <span class="nv">@list</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="nv">$_</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span> <span class="k">for</span> <span class="nv">@fizzbuzz</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ということは、更に短くできそう</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="nv">$_</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span> <span class="k">for</span> <span class="nb">map</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">3</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">5</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;FizzBuzz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">elsif</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">3</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;Fizz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">elsif</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">5</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;Buzz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$_</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span> <span class="p">(</span><span class="mi">0</span> <span class="o">..</span> <span class="mi">100</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>おお。<br/>
後置 for で map が扱えるとか。ちゃんとした言語だ。<br/>
ということで、変数が <code>$_</code> だけになったのが良くなってきた感じ。</p>

<p><strong><em>FizzBuzz</em></strong> はこのくらにして、次へ</p>
</div>
  
  <footer style="text-align: right">
    <a rel="full-article" href="/blog/2012/03/27/my-first-perl-2.html">permalink</a>
  </footer>


    </article>
  
  
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">My First Perl #1</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-27T13:59:00+09:00" pubdate data-updated="true">Mar 27<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>人生初 perl を書いていこうと思います。<br/>
頑張るぞ</p>

<p>教材は <a href="http://d.hatena.ne.jp/perlcodesample/20091221/1260183022">サンプルコードによるPerl入門</a> より</p>

<p>perl 自体は lion に入ってたものをそのまま</p>

<pre><code>&gt; perl -v

This is perl 5, version 12, subversion 3 (v5.12.3) built for darwin-thread-multi-2level
(with 2 registered patches, see perl -V for more detail)

Copyright 1987-2010, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.
</code></pre>

<h1>control flow</h1>

<p><a href="http://d.hatena.ne.jp/perlcodesample/20091226/1264257759">Perl基礎文法最速マスター</a> を参考にするのでスキップ</p>

<h1>fizzbuzz</h1>

<p>まずは、やっぱりこれで。<br/>
文法を読んだだけなので、エレガントさには欠ける予定</p>

<h2>ルール</h2>

<p><a href="http://d.hatena.ne.jp/keyword/FizzBuzz">http://d.hatena.ne.jp/keyword/FizzBuzz</a> より</p>

<blockquote><p>3と5の公倍数の時は、FizzBuzzとだけ回答するべき。最初の定義では、たとえば15がやってきた時「3の倍数なのでFizzと言う、5の倍数なのでBuzzと言う、3と5の公倍数なのでFizzBuzzと言う、結果、15の時はFizzBuzzFizzBuzzになる」と解釈することも可能である。</p></blockquote>

<h2>定義</h2>

<ul>
<li>カウンターを設定、0とする。</li>
<li>カウンターに1を加える。</li>
<li>カウンターが100（の他、設定した値）を超えたなら、終了する。</li>
<li>カウンターが3と5の公倍数であるならば、「FizzBuzz」を出力し、2に戻る。</li>
<li>カウンターが3の倍数であるならば、「Fizz」を出力し、2に戻る。</li>
<li>カウンターが5の倍数であるならば、「Buzz」を出力し、2に戻る。</li>
<li>カウンターの数字を出力し、2に戻る。</li>
</ul>


<h3>実装</h3>

<p>こんな感じ？</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span><span class="p">(</span><span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="o">++</span><span class="nv">$i</span><span class="p">){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">((</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$i</span> <span class="nv">%</span> <span class="nv">3</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$i</span> <span class="nv">%</span> <span class="nv">5</span><span class="p">))){</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;FizzBuzz\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">elsif</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nv">$i</span> <span class="nv">%</span> <span class="nv">3</span><span class="p">){</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Fizz\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">elsif</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nv">$i</span> <span class="nv">%</span> <span class="nv">5</span><span class="p">){</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Buzz\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">print</span> <span class="nv">$i</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>うむ。正解かどうかわからん。<br/>
phpの文法は perl からパクったらしいので、古く慣れ親しんだ php でも描いてみた。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="o">++</span><span class="nv">$i</span><span class="p">){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">((</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">%</span> <span class="mi">3</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">%</span> <span class="mi">5</span><span class="p">))){</span>
</span><span class='line'>    <span class="k">print</span> <span class="s2">&quot;FizzBuzz</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">continue</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nv">$i</span> <span class="o">%</span> <span class="mi">3</span><span class="p">){</span>
</span><span class='line'>    <span class="k">print</span> <span class="s2">&quot;Fizz</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">continue</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nv">$i</span> <span class="o">%</span> <span class="mi">5</span><span class="p">){</span>
</span><span class='line'>    <span class="k">print</span> <span class="s2">&quot;Buzz</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">continue</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">print</span> <span class="nv">$i</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>うむ。
else区を書きたくない派(あるのか?)の一員としては、単純なループならcontinue使いたくなります。</p>

<h3>もう少し凝ってみよう</h3>

<p>やっぱり for 文はダサさが目立つので map 文(?) とか 後置文(?) を使ってみたい</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">@list</span> <span class="o">=</span> <span class="p">();</span>
</span><span class='line'><span class="k">for</span><span class="p">(</span><span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="o">++</span><span class="nv">$i</span><span class="p">){</span>
</span><span class='line'>  <span class="nb">push</span> <span class="nv">@list</span><span class="p">,</span> <span class="nv">$i</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="nv">@fizzbuzz</span> <span class="o">=</span> <span class="nb">map</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">3</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">5</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;FizzBuzz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">elsif</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">3</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;Fizz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">elsif</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="nv">$_</span> <span class="nv">%</span> <span class="nv">5</span><span class="p">)){</span>
</span><span class='line'>    <span class="s">&quot;Buzz&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$_</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span> <span class="nv">@list</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="nv">$_</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span> <span class="k">for</span> <span class="nv">@fizzbuzz</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>配列アクセスは変数として <code>$</code> を使うけど、配列としてのアクセスは <code>@</code> を使うのね。<br/>
変数が配列なのかどうかが分かりやすいね。この言語。</p>

<p>ただ、 map の戻りを指定するのは、評価された値になるってとこがなんとも。他の式と違うんだね<br/>
あとは、map の結果は必ず配列になるハズなのに <code>my @fizzbuzz</code> って宣言するのはなんとも。。。</p>

<h1>おわり</h1>

<p>次行ってみよう</p>
</div>
  
  <footer style="text-align: right">
    <a rel="full-article" href="/blog/2012/03/27/my-first-perl-1.html">permalink</a>
  </footer>


    </article>
  
  
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">Octopress でブログを書いてみる</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-26T23:15:00+09:00" pubdate data-updated="true">Mar 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>html で今までゴリゴリ書いてきたけど、疲れたので markdown な文法を使いたいなぁ<br/>
ってのと、ブログをもう少し手軽に書けて、自由度が欲しい(ブラウザから離れてみたい)なぁって思って <a href="http://octopress.org/">octopress</a> を使ってみることにした。</p>

<h1>最初にやったこと</h1>

<ul>
<li>kui theme を導入</li>
<li>tag cloud を導入</li>
<li>それぞれについて、html, css を少し編集</li>
</ul>


<h2>kui を導入</h2>

<p>footer にも出しているけど、デフォルトのテーマが少し気に入らないので <br/>
<a href="https://github.com/kui/k-ui-octopress-theme">Octopress Theme for k-ui.jp</a> を入れてみる</p>

<p>少し変更したコードは後述</p>

<h2>tag cloud を導入</h2>

<p>categories が使えるけど、表示される トコがなかったので、導入</p>

<p><a href="http://tokkonopapa.github.com/blog/2012/01/04/octopress-plugin-for-categories-cloud/">http://tokkonopapa.github.com/blog/2012/01/04/octopress-plugin-for-categories-cloud/</a> このまま</p>

<h2>後述部分</h2>

<p>まず、kuiのcssを変更した。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="err">#</span> <span class="nt">sass</span><span class="o">/</span><span class="nt">_kui</span><span class="nc">.scss</span>
</span><span class='line'><span class="nt">---</span> <span class="nc">.themes</span><span class="o">/</span><span class="nt">kui</span><span class="o">/</span><span class="nt">sass</span><span class="o">/</span><span class="nt">_kui</span><span class="nc">.scss</span>   <span class="nt">2012-03-24</span> <span class="nt">21</span><span class="nd">:40:27</span><span class="nc">.000000000</span> <span class="o">+</span><span class="nt">0900</span>
</span><span class='line'><span class="o">+++</span> <span class="nt">sass</span><span class="o">/</span><span class="nt">_kui</span><span class="nc">.scss</span>  <span class="nt">2012-03-24</span> <span class="nt">23</span><span class="nd">:17:26</span><span class="nc">.000000000</span> <span class="o">+</span><span class="nt">0900</span>
</span><span class='line'><span class="o">@@</span> <span class="nt">-9</span><span class="o">,</span><span class="nt">7</span> <span class="o">+</span><span class="nt">9</span><span class="o">,</span><span class="nt">7</span> <span class="o">@@</span>
</span><span class='line'>   <span class="nt">padding</span><span class="o">:</span> <span class="nt">0px</span><span class="o">;</span>
</span><span class='line'> <span class="err">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">-h2</span><span class="o">,</span> <span class="nt">h3</span><span class="o">,</span> <span class="nt">h4</span><span class="o">,</span> <span class="nt">h5</span><span class="o">,</span> <span class="nt">h6</span><span class="p">{</span>
</span><span class='line'><span class="o">+</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">h3</span><span class="o">,</span> <span class="n">h4</span><span class="o">,</span> <span class="n">h5</span><span class="o">,</span> <span class="n">h6</span><span class="err">{</span>
</span><span class='line'>   <span class="k">font-family</span><span class="o">:</span> <span class="s2">&quot;Hiragino Kaku Gothic Pro W3&quot;</span><span class="o">,</span> <span class="s2">&quot;ヒラギノ角ゴ Pro W3&quot;</span><span class="o">,</span> <span class="n">Meiryo</span><span class="o">,</span> <span class="s2">&quot;メイリオ&quot;</span><span class="o">,</span> <span class="s2">&quot;MS P Gothic&quot;</span><span class="o">,</span> <span class="s2">&quot;ＭＳ Ｐゴシック&quot;</span><span class="o">,</span> <span class="k">sans-serif</span><span class="p">;</span>
</span><span class='line'> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">@@</span> <span class="nt">-125</span><span class="o">,</span><span class="nt">6</span> <span class="o">+</span><span class="nt">125</span><span class="o">,</span><span class="nt">7</span> <span class="o">@@</span>
</span><span class='line'>     <span class="nt">margin</span><span class="o">:</span> <span class="nt">0px</span><span class="o">;</span>
</span><span class='line'>     <span class="nt">padding</span><span class="o">:</span> <span class="nt">8px</span><span class="o">;</span>
</span><span class='line'>     <span class="nt">font-size</span><span class="o">:</span> <span class="nt">80</span><span class="o">%;</span>
</span><span class='line'><span class="o">+</span>    <span class="nt">clear</span><span class="o">:</span> <span class="nt">both</span><span class="o">;</span>
</span><span class='line'>     <span class="nt">p</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">margin</span><span class="o">:</span> <span class="m">0px</span><span class="p">;</span>
</span><span class='line'>     <span class="p">}</span>
</span><span class='line'><span class="o">@@</span> <span class="nt">-139</span><span class="o">,</span><span class="nt">3</span> <span class="o">+</span><span class="nt">140</span><span class="o">,</span><span class="nt">39</span> <span class="o">@@</span>
</span><span class='line'> <span class="nf">#dsq-reply</span> <span class="o">&gt;</span> <span class="nt">h3</span><span class="o">,</span> <span class="nf">#dsq-account-dropdown</span><span class="o">,</span> <span class="nf">#dsq-subscribe</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'> <span class="nf">#disqus_thread</span> <span class="nf">#dsq-content</span> <span class="nf">#dsq-global-toolbar</span> <span class="p">{</span> <span class="k">margin</span><span class="o">:</span> <span class="m">0.3em</span> <span class="m">0px</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'> <span class="nf">#dsq-reply</span><span class="p">{</span> <span class="k">margin</span><span class="o">:</span> <span class="m">0.3em</span><span class="p">}</span>
</span><span class='line'><span class="o">+</span>
</span><span class='line'><span class="o">+</span><span class="c">/* custom */</span>
</span><span class='line'><span class="o">+</span><span class="nt">header</span><span class="o">[</span><span class="nt">role</span><span class="o">=</span><span class="s2">&quot;banner&quot;</span><span class="o">]</span> <span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
</span><span class='line'><span class="o">+</span>  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span><span class="p">}</span>
</span><span class='line'><span class="o">+</span><span class="nc">.pagination</span> <span class="p">{</span>
</span><span class='line'><span class="o">+</span>  <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">clear</span><span class="o">:</span> <span class="k">both</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">margin-top</span><span class="o">:</span> <span class="m">40px</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span><span class="p">}</span>
</span><span class='line'><span class="o">+</span>
</span><span class='line'><span class="o">+</span><span class="nc">.sidebar</span> <span class="p">{</span>
</span><span class='line'><span class="o">+</span>  <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">clear</span><span class="o">:</span> <span class="k">both</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">margin-top</span><span class="o">:</span> <span class="m">40px</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">border-top</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ddd</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span><span class="p">}</span>
</span><span class='line'><span class="o">+</span><span class="nc">.sidebar</span> <span class="nt">section</span> <span class="p">{</span>
</span><span class='line'><span class="o">+</span>  <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">width</span><span class="o">:</span> <span class="m">380px</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">margin-left</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span><span class="p">}</span>
</span><span class='line'><span class="o">+</span><span class="nc">.sidebar</span> <span class="nt">section</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">2n</span><span class="o">+</span><span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'><span class="o">+</span>  <span class="k">clear</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span><span class="p">}</span>
</span><span class='line'><span class="o">+</span>
</span><span class='line'><span class="o">+</span><span class="nc">.tag-cloud</span> <span class="nt">a</span> <span class="p">{</span>
</span><span class='line'><span class="o">+</span>  <span class="k">font-size</span><span class="o">:</span> <span class="m">80</span><span class="o">%</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">line-height</span><span class="o">:</span> <span class="m">2em</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span><span class="p">}</span>
</span><span class='line'><span class="o">+</span>
</span><span class='line'><span class="o">+</span><span class="nc">.avator</span> <span class="p">{</span>
</span><span class='line'><span class="o">+</span>  <span class="k">width</span><span class="o">:</span> <span class="m">128px</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">height</span><span class="o">:</span> <span class="m">128px</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span>  <span class="k">padding</span><span class="o">:</span> <span class="m">8px</span> <span class="m">0</span> <span class="m">0</span> <span class="m">9px</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>h1もh2,h3と同じスタイルを適用するように<br/>
.pagination, .sidebar を実装して、.sidebarは2カラムで表示するように変更<br/>
.tag-cloud は tag-cloudプラグインで書かれていたものをそのまま、<br/>
.avator は custom/acide/about.html の変更にて(この後に出てくる)</p>

<h3>source/_includes/social_service_links.html の変更</h3>

<p>これは本家のままだと、上部に出てくるgithub,twitterがkuiのままになってしまうので、下記のように変更</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'># source/_includes/social_service_links.html
</span><span class='line'><span class="gd">--- .themes/kui/source/_includes/social_service_links.html   2012-03-24 21:40:27.000000000 +0900</span>
</span><span class='line'><span class="gi">+++ source/_includes/social_service_links.html   2012-03-24 22:16:02.000000000 +0900</span>
</span><span class='line'><span class="gu">@@ -1,17 +1,18 @@</span>
</span><span class='line'>
</span><span class='line'> &lt;div id=&quot;social-links&quot;&gt;
</span><span class='line'>   &lt;ul&gt;
</span><span class='line'><span class="gi">+    {% if site.github_user %}</span>
</span><span class='line'>     &lt;li id=&quot;social-links-github&quot;&gt;
</span><span class='line'><span class="gd">-      &lt;a title=&quot;GitHub&quot; href=&quot;https://github.com/kui&quot;&gt;github&lt;/a&gt;</span>
</span><span class='line'><span class="gi">+      &lt;a title=&quot;GitHub&quot; href=&quot;https://github.com/{{site.github_user}}&quot;&gt;GitHub&lt;/a&gt;</span>
</span><span class='line'>     &lt;/li&gt;
</span><span class='line'><span class="gi">+    {% endif %}</span>
</span><span class='line'><span class="gi">+    {% if site.twitter_user %}</span>
</span><span class='line'>     &lt;li id=&quot;social-links-twitter&quot;&gt;
</span><span class='line'><span class="gd">-      &lt;a title=&quot;twitter&quot; href=&quot;http://twitter.com/k_ui&quot;&gt;twitter&lt;/a&gt;</span>
</span><span class='line'><span class="gd">-    &lt;/li&gt;</span>
</span><span class='line'><span class="gd">-    &lt;li id=&quot;social-links-tumblr&quot;&gt;</span>
</span><span class='line'><span class="gd">-      &lt;a title=&quot;tumblr&quot; href=&quot;http://daftbeats.tumblr.com/&quot;&gt;tumblr&lt;/a&gt;</span>
</span><span class='line'><span class="gi">+      &lt;a title=&quot;twitter&quot; href=&quot;http://twitter.com/{{site.twitter_user}}&quot;&gt;twitter&lt;/a&gt;</span>
</span><span class='line'>     &lt;/li&gt;
</span><span class='line'><span class="gi">+    {% endif %}</span>
</span><span class='line'>     &lt;li id=&quot;social-links-feed&quot;&gt;
</span><span class='line'><span class="gd">-      &lt;a title=&quot;feed&quot; href=&quot;http://k-ui.jp/atom.xml&quot;&gt;feed&lt;/a&gt;</span>
</span><span class='line'><span class="gi">+      &lt;a title=&quot;feed&quot; href=&quot;http://nowelium.github.com/atom.xml&quot;&gt;feed&lt;/a&gt;</span>
</span><span class='line'>     &lt;/li&gt;
</span><span class='line'>   &lt;/ul&gt;
</span><span class='line'> &lt;/div&gt;
</span></code></pre></td></tr></table></div></figure>


<p>基本はそのまま、ただ、if site.github からuserを拾うようにてみたりしてみた。</p>

<h3>source/index.html を変更</h3>

<p>kuiのデフォルトはかなりシンプルで、トップページに記事のリンクへのリンクだけになっているので<br/>
もう少し記事を全面に出せるように、classicの部分をmerge</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'># source/index.html
</span><span class='line'><span class="gd">--- .themes/kui/source/index.html    2012-03-24 21:46:01.000000000 +0900</span>
</span><span class='line'><span class="gi">+++ source/index.html    2012-03-24 22:21:55.000000000 +0900</span>
</span><span class='line'><span class="gu">@@ -4,27 +4,30 @@</span>
</span><span class='line'> ---
</span><span class='line'> &lt;div id=&quot;top&quot;&gt;
</span><span class='line'>
</span><span class='line'><span class="gd">-  &lt;div id=&quot;recent_posts&quot;&gt;</span>
</span><span class='line'><span class="gd">-    &lt;h2&gt;最近のブログ投稿&lt;/h2&gt;</span>
</span><span class='line'><span class="gd">-</span>
</span><span class='line'><span class="gd">-    &lt;ul&gt;</span>
</span><span class='line'><span class="gd">-    {% for post in paginator.posts %}</span>
</span><span class='line'><span class="gd">-      &lt;li&gt;</span>
</span><span class='line'><span class="gd">-        &lt;article&gt;</span>
</span><span class='line'><span class="gd">-          &lt;a rel=&quot;full-article&quot; href=&quot;{{ post.url }}&quot;&gt;{{ post.title }}&lt;/a&gt;</span>
</span><span class='line'><span class="gd">-          （&lt;time datetime=&quot;{{post.date}}&quot; pubdate&gt;{{post.date_formatted}}&lt;/time&gt;）</span>
</span><span class='line'><span class="gd">-        &lt;/article&gt;</span>
</span><span class='line'><span class="gd">-      &lt;/li&gt;</span>
</span><span class='line'><span class="gd">-    {% endfor %}</span>
</span><span class='line'><span class="gd">-    &lt;/ul&gt;</span>
</span><span class='line'><span class="gd">-</span>
</span><span class='line'><span class="gd">-    &lt;p&gt;&lt;a href=&quot;/blog/archives&quot;&gt;&amp;laquo; 過去の記事&lt;/a&gt;&lt;/p&gt;</span>
</span><span class='line'><span class="gd">-</span>
</span><span class='line'><span class="gi">+  {% assign index = true %}</span>
</span><span class='line'><span class="gi">+  {% for post in paginator.posts %}</span>
</span><span class='line'><span class="gi">+  {% assign content = post.content %}</span>
</span><span class='line'><span class="gi">+    &lt;article class=&quot;hentry&quot; role=&quot;article&quot;&gt;</span>
</span><span class='line'><span class="gi">+      {% include article.html %}</span>
</span><span class='line'><span class="gi">+    &lt;/article&gt;</span>
</span><span class='line'><span class="gi">+  {% endfor %}</span>
</span><span class='line'><span class="gi">+</span>
</span><span class='line'><span class="gi">+  &lt;div class=&quot;pagination&quot;&gt;</span>
</span><span class='line'><span class="gi">+    {% if paginator.next_page %}</span>
</span><span class='line'><span class="gi">+      &lt;a class=&quot;prev&quot; href=&quot;{{paginator.next_page}}&quot;&gt;&amp;larr; Older&lt;/a&gt;</span>
</span><span class='line'><span class="gi">+    {% endif %}</span>
</span><span class='line'><span class="gi">+    &lt;a href=&quot;/blog/archives&quot;&gt;Archives&lt;/a&gt;</span>
</span><span class='line'><span class="gi">+    {% if paginator.previous_page %}</span>
</span><span class='line'><span class="gi">+    &lt;a class=&quot;next&quot; href=&quot;{{paginator.previous_page}}&quot;&gt;Newer &amp;rarr;&lt;/a&gt;</span>
</span><span class='line'><span class="gi">+    {% endif %}</span>
</span><span class='line'>   &lt;/div&gt;
</span><span class='line'>
</span><span class='line'><span class="gd">-</span>
</span><span class='line'><span class="gd">-  &lt;!-- include asides.html --&gt;</span>
</span><span class='line'><span class="gd">-  {% include asides.html %}</span>
</span><span class='line'><span class="gd">-  &lt;!-- /include asides.html --&gt;</span>
</span><span class='line'><span class="gi">+  &lt;div class=&quot;sidebar&quot;&gt;</span>
</span><span class='line'><span class="gi">+    {% if site.blog_index_asides.size %}</span>
</span><span class='line'><span class="gi">+      {% include_array blog_index_asides %}</span>
</span><span class='line'><span class="gi">+    {% else %}</span>
</span><span class='line'><span class="gi">+      {% include_array default_asides %}</span>
</span><span class='line'><span class="gi">+    {% endif %}</span>
</span><span class='line'><span class="gi">+  &lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'> &lt;/div&gt;
</span></code></pre></td></tr></table></div></figure>


<h3>source/_includes/article.html</h3>

<p>デフォルトのままだと、permalinkを出すことができないので、&#8221;ReadMore&#8221; 的なものをそのままpermalinkへ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gd">--- .themes/classic/source/_includes/article.html   2012-03-24 22:01:56.000000000 +0900</span>
</span><span class='line'><span class="gi">+++ source/_includes/article.html    2012-03-24 22:11:02.000000000 +0900</span>
</span><span class='line'><span class="gu">@@ -1,7 +1,7 @@</span>
</span><span class='line'> {% unless page.no_header %}
</span><span class='line'>   &lt;header&gt;
</span><span class='line'>     {% if index %}
</span><span class='line'><span class="gd">-      &lt;h1 class=&quot;entry-title&quot;&gt;&lt;a href=&quot;{{ root_url }}{{ post.url }}&quot;&gt;{% if site.titlecase %}{{ post.title | titlecase }}{% else %}{{ post.title }}{% endif %}&lt;/a&gt;&lt;/h1&gt;</span>
</span><span class='line'><span class="gi">+      &lt;h1 class=&quot;entry-title&quot;&gt;{% if site.titlecase %}{{ post.title | titlecase }}{% else %}{{ post.title }}{% endif %}&lt;/h1&gt;</span>
</span><span class='line'>     {% else %}
</span><span class='line'>       &lt;h1 class=&quot;entry-title&quot;&gt;{% if site.titlecase %}{{ page.title | titlecase }}{% else %}{{ page.title }}{% endif %}&lt;/h1&gt;
</span><span class='line'>     {% endif %}
</span><span class='line'><span class="gu">@@ -18,11 +18,9 @@</span>
</span><span class='line'> {% if index %}
</span><span class='line'>   &lt;div class=&quot;entry-content&quot;&gt;{{ content | excerpt }}&lt;/div&gt;
</span><span class='line'>   {% capture excerpted %}{{ content | has_excerpt }}{% endcapture %}
</span><span class='line'><span class="gd">-  {% if excerpted == &#39;true&#39; %}</span>
</span><span class='line'><span class="gd">-    &lt;footer&gt;</span>
</span><span class='line'><span class="gd">-      &lt;a rel=&quot;full-article&quot; href=&quot;{{ root_url }}{{ post.url }}&quot;&gt;{{ site.excerpt_link }}&lt;/a&gt;</span>
</span><span class='line'><span class="gd">-    &lt;/footer&gt;</span>
</span><span class='line'><span class="gd">-  {% endif %}</span>
</span><span class='line'><span class="gi">+  &lt;footer style=&quot;text-align: right&quot;&gt;</span>
</span><span class='line'><span class="gi">+    &lt;a rel=&quot;full-article&quot; href=&quot;{{ root_url }}{{ post.url }}&quot;&gt;{{ site.excerpt_link }}&lt;/a&gt;</span>
</span><span class='line'><span class="gi">+  &lt;/footer&gt;</span>
</span><span class='line'> {% else %}
</span><span class='line'> &lt;div class=&quot;entry-content&quot;&gt;{{ content }}&lt;/div&gt;
</span><span class='line'> {% endif %}
</span></code></pre></td></tr></table></div></figure>


<h3>source/_includes/custom/asides/about.html を変更</h3>

<p>gravator から画像を持ってくるようにした。<br/>
ここは、本来ならhashを計算してplugin化できるといいのかも。(その内やってみたい)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gd">--- .themes/classic/source/_includes/custom/asides/about.html   2012-03-24 19:17:32.000000000 +0900</span>
</span><span class='line'><span class="gi">+++ source/_includes/custom/asides/about.html    2012-03-24 23:19:29.000000000 +0900</span>
</span><span class='line'><span class="gu">@@ -1,4 +1,9 @@</span>
</span><span class='line'> &lt;section&gt;
</span><span class='line'>   &lt;h1&gt;About Me&lt;/h1&gt;
</span><span class='line'><span class="gd">-  &lt;p&gt;A little something about me.&lt;/p&gt;</span>
</span><span class='line'><span class="gi">+  &lt;div class=&quot;avator&quot;&gt;</span>
</span><span class='line'><span class="gi">+    &lt;a href=&quot;http://about.me/nowelium&quot;&gt;</span>
</span><span class='line'><span class="gi">+      &lt;img src=&quot;http://www.gravatar.com/avatar/b6b88d1ee75665cf5a7553410e979a11.png?s=140&quot; height=&quot;64&quot; width=&quot;64&quot; /&gt;</span>
</span><span class='line'><span class="gi">+      &lt;p&gt;Yusuke Hata&lt;/p&gt;</span>
</span><span class='line'><span class="gi">+    &lt;/a&gt;</span>
</span><span class='line'><span class="gi">+  &lt;/div&gt;</span>
</span><span class='line'> &lt;/section&gt;
</span><span class='line'>yusuke@yusu
</span></code></pre></td></tr></table></div></figure>


<h3>その他</h3>

<p>source/_includes/asides/*.html を少し変更したりしたかも。<br/>
ログを残しつつやってたつもりが、試行錯誤のまま差分が行方不明になってしまったので、思い出したら書いていこうと思う。
そんな感じ</p>
</div>
  
  <footer style="text-align: right">
    <a rel="full-article" href="/blog/2012/03/26/octopress-diff.html">permalink</a>
  </footer>


    </article>
  
  
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">Hello World</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-24T20:08:00+09:00" pubdate data-updated="true">Mar 24<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>first post!</p>
</div>
  
  <footer style="text-align: right">
    <a rel="full-article" href="/blog/2012/03/24/title.html">permalink</a>
  </footer>


    </article>
  

  <div class="pagination">
    
    <a href="/blog/archives">Archives</a>
    
  </div>

  <div class="sidebar">
    
      <section>
  <h1>About Me</h1>
  <div class="avator">
    <a href="http://about.me/nowelium">
      <img src="http://www.gravatar.com/avatar/b6b88d1ee75665cf5a7553410e979a11.png?s=140" height="64" width="64" />
      <p>Yusuke Hata</p>
    </a>
  </div>
</section>
<section>
  <h2>Tags</h2>
  <span id="tag-cloud"><a href='/blog/categories/bitmap' style='font-size: 112.0%'>Bitmap(1)</a> <a href='/blog/categories/hello-world' style='font-size: 112.0%'>Hello world(1)</a> <a href='/blog/categories/javascript' style='font-size: 136.0%'>Javascript(3)</a> <a href='/blog/categories/nodejs' style='font-size: 112.0%'>Nodejs(1)</a> <a href='/blog/categories/octopress' style='font-size: 124.0%'>Octopress(2)</a> <a href='/blog/categories/perl' style='font-size: 160.0%'>Perl(5)</a> </span>
</section>
<section>
  <h2>Recent Posts</h2>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/04/22/my-first-perl-5.html">My First Perl#5</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/01/my-first-perl-4.html">My First Perl #4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/30/my-first-perl-3.html">My First Perl #3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/29/console-badapple-js.html">Node.jsでコンソールにBad Apple!!を出力してみた</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/27/my-first-perl-2.html">My First Perl #2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/27/my-first-perl-1.html">My First Perl #1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/26/octopress-diff.html">octopress でブログを書いてみる</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/24/title.html">hello world</a>
      </li>
    
  </ul>
</section>


<section>
  <h2>
    Github
    &mdash;
    <a href="https://github.com/nowelium">GitHub</a>
  </h2>
  <ul id="gh_repos">
    <li class="loading">読込中 &#8230;</li>
  </ul>
  
  <a href="https://github.com/nowelium">@nowelium</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'nowelium',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section>
  <h2>
    Tweets
    &mdash;
    <a href="http://twitter.com/nowelium">twitter</a>
  </h2>
  <ul id="tweets">
    <li class="loading">読込中 &#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("nowelium", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/nowelium" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @nowelium</a>
  
</section>





    
  </div>

</div>

</div>

	<!-- /content -->
      </div>

      <footer role="contentinfo">
	<!-- include footer -->
	<p>
  Copyright &copy; 2012 - Yusuke Hata -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <span class="credit">Theme <a href="https://github.com/kui/k-ui-octopress-theme">Octopress Theme for k-ui.jp</a></span>
</p>

	<!-- /include -->
      </footer>
      
      <!-- include after_footer -->
      



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




      <!-- /include -->

    </div>
  </body>
</html>
